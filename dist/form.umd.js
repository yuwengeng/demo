!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){var t;t=function(t){"function"==typeof t&&t("common/ui/Loading");var e=window.addEventListener?'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M116.152,99.999l36.482-36.486c2.881-2.881,2.881-7.54,0-10.42 l-5.215-5.215c-2.871-2.881-7.539-2.881-10.42,0l-36.484,36.484L64.031,47.877c-2.881-2.881-7.549-2.881-10.43,0l-5.205,5.215 c-2.881,2.881-2.881,7.54,0,10.42l36.482,36.486l-36.482,36.482c-2.881,2.881-2.881,7.549,0,10.43l5.205,5.215 c2.881,2.871,7.549,2.871,10.43,0l36.484-36.488L137,152.126c2.881,2.871,7.549,2.871,10.42,0l5.215-5.215 c2.881-2.881,2.881-7.549,0-10.43L116.152,99.999z"/></svg>':"",i="WebkitAppearance"in document.documentElement.style||void 0!==document.webkitHidden;$.dialog=function(t){return new n(t)};var n=function(t){var n={title:"",content:"",width:"auto",buttons:[],onShow:$.noop,onHide:$.noop,onRemove:$.noop},o=$.extend({},n,t||{}),a={};this.el=a,this.width=o.width,this.callback={show:o.onShow,hide:o.onHide,remove:o.onRemove},a.container=window.addEventListener?$('<dialog class="ui-dialog-container"></dialog>'):$('<div class="ui-dialog-container"></div>'),history.pushState&&a.container.get(0).addEventListener(i?"webkitAnimationEnd":"animationend",function(t){"dialog"==t.target.tagName.toLowerCase()&&this.classList.remove("ui-dialog-animation")}),a.dialog=$('<div class="ui-dialog"></div>').css("width",o.width).attr({tabindex:"-1",role:"dialog"}),a.title=$('<div class="ui-dialog-title" role="heading"></div>').html(o.title);var l=("id_"+Math.random()).replace("0.","");a.close=$('<a href="javascript:" class="ui-dialog-close ESC"></a>').attr({role:"button","aria-label":"关闭",id:l,"data-target":l}).html(e).click($.proxy(function(t){t.preventDefault();var e=document.activeElement,i=e.getAttribute("data-target"),n=i&&document.getElementById(i);window.isKeyEvent&&n&&e!=a.close[0]&&document.querySelector('a[data-target="'+i+'"],input[data-target="'+i+'"]')&&n.clientWidth>0||this[this.closeMode]()},this));var s=o.content;$.isFunction(s)&&(s=s()),this.closeMode=s.size?"hide":"remove",a.body=$('<div class="ui-dialog-body"></div>')[s.size?"append":"html"](s),a.footer=$('<div class="ui-dialog-footer"></div>'),this.button(o.buttons),a.container.append(a.dialog.append(a.close).append(a.title).append(a.body).append(a.footer)),document.querySelector||a.container.append('<i class="ui-dialog-after"></i>');var r=$(".ui-dialog-container");return r.length?r.eq(0).before(a.container.css({zIndex:1*r.eq(0).css("z-index")+1})):(o.container||$(document.body)).append(a.container),this.display=!1,o.content&&this.show(),this};return n.prototype.button=function(t){var e=this.el,i=this;return e.footer.empty(),$.each(t,function(t,n){n=n||{};var o=t?n.type||"":n.type||"primary",a=t?n.value||"取消":n.value||"确定",l=n.events||{click:function(){i[i.closeMode]()}};$.isFunction(l)&&(l={click:l});var s="ui-button";o&&(s=s+" "+s+"-"+o),e["button"+t]=n.for?$('<label for="'+n.for+'" class="'+s+'" role="button">'+a+"</label>"):$('<a href="javascript:" class="'+s+'" role="button">'+a+"</a>"),$.each(l,function(n,o){e["button"+t].bind(n,{dialog:i},o),e["button"+t].on("focus",function(){$(this).css("outline",window.isKeyEvent?"":"none")})}),e.footer.append(e["button"+t])}),i},n.prototype.loading=function(){if(!$().loading)return window.console&&window.console.error("need Loading.js"),e;var t=this.el,e=this;return t&&(t.container.attr("class",["ui-dialog-container","ui-dialog-loading"].join(" ")),t.body.loading(),e.show()),e},n.prototype.unloading=function(t){if(!$().unloading)return window.console&&window.console.error("need Loading.js"),i;var e=this.el,i=this;return e&&(e.container.removeClass("ui-dialog-loading"),e.body.unloading(t)),i},n.prototype.open=function(t,e){var i=this.el,n=$.extend({},{title:"",buttons:[]},e||{});return i&&t&&(i.container.attr("class",["ui-dialog-container"].join(" ")),i.title.html(n.title),i.body.html(t),this.button(n.buttons).show()),this},n.prototype.alert=function(t,e){var i=this.el,n=$.extend({},{title:"",type:"remind",buttons:[{}]},e||{});return n.buttons[0].type||"remind"==n.type||(n.buttons[0].type=n.type),i&&t&&(i.container.attr("class",["ui-dialog-container","ui-dialog-alert"].join(" ")),i.dialog.width("auto").attr({role:"alertdialog"}),i.title.html(n.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),i.body.html('<div class="ui-dialog-'+n.type+' ui-dialog-alert">'+t+"</div>"),this.button(n.buttons).show(),i.button0&&i.button0.focus()),this},n.prototype.confirm=function(t,e){var i=this.el,n=$.extend({},{title:"",type:"warning",buttons:[{type:"warning"},{}]},e||{});return n.buttons.length&&!n.buttons[0].type&&(n.buttons[0].type="warning"),i&&t&&(i.container.attr("class",["ui-dialog-container","ui-dialog-confirm"].join(" ")),i.dialog.width("auto"),i.title.html(n.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),i.body.html('<div class="ui-dialog-'+n.type+' ui-dialog-confirm">'+t+"</div>"),this.button(n.buttons).show(),i.button0&&i.button0.focus()),this},n.prototype.ajax=function(t,e){var i=this,n=$.extend({},{dataType:"JSON",timeout:3e4,error:function(t,e){i.alert("<h6>尊敬的用户，很抱歉您刚才的操作没有成功！</h6>"+("timeout"==e?"<p>主要是由于请求时间过长，数据没能成功加载，这一般是由于网速过慢导致，您可以稍后重试！</p>":"parsererror"==e?"<p>原因是请求的数据含有不规范的内容。一般出现这样的问题是开发人员没有考虑周全，欢迎向我们反馈此问题！</p>":"<p>一般是网络出现了异常，如断网；或是网络临时阻塞，您可以稍后重试！如依然反复出现此问题，欢迎向我们反馈！</p>"),{type:"warning"}).unloading()}},t||{});if(!n.url)return this;var o=$.extend({},{title:"",content:function(t){return"string"==typeof t?t:"看见我说明没使用'options.content'做JSON解析"},buttons:[]},e||{}),a=(new Date).getTime(),l=n.success;return n.success=function(t){i.open(o.content(t),o),(new Date).getTime()-a<100?i.unloading(0):i.unloading(),$.isFunction(l)&&l.apply(this,arguments)},i.loading(),$.ajax(n),i},n.prototype.scroll=function(){var t=$(".ui-dialog-container"),e=!1;if(t.each(function(){"block"==$(this).css("display")&&(e=!0)}),e){var i=17;1!=this.display&&"number"==typeof window.innerWidth&&(i=window.innerWidth-document.documentElement.clientWidth),document.documentElement.style.overflow="hidden",1!=this.display&&$(document.body).css("border-right",i+"px solid transparent")}else document.documentElement.style.overflow="",$(document.body).css("border-right","");return this},n.prototype.tabindex=function(){var t=this.el.dialog,e=this.lastActiveElement;if(1==this.display){var i=document.activeElement;t[0]!==i&&(this.lastActiveElement=i),t&&t.focus()}else e&&"body"!=e.tagName.toLowerCase()&&(e.focus(),e.blur(),this.lastActiveElement=null);return t},n.prototype.show=function(){var t=this.el&&this.el.container;return t&&(t.css("display","block"),1!=this.display&&t.addClass("ui-dialog-animation"),this.scroll(),this.display=!0,this.tabindex(),$.isFunction(this.callback.show)&&this.callback.show.call(this,t)),this},n.prototype.hide=function(){var t=this.el.container;return t&&(t.hide(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.hide)&&this.callback.hide.call(this,t)),this},n.prototype.remove=function(){var t=this.el&&this.el.container;return t&&(t.remove(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.remove)&&this.callback.remove.call(this,t)),this},n},"function"==typeof define&&(define.amd||define.cmd)?define(t):(void 0).Dialog=t()});
//# sourceMappingURL=form.umd.js.map
